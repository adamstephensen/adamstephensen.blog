---
title: Great New ReSharper Feature – Dependency Graph
permalink: 2013/08/13/great-new-resharper-feature-dependency-graph/
layout: post
tags:
  - .NET
comments: true
---
<p>If you are a ReSharper user (and you should be), check out the new dependency graph. It is awesome for easily getting a high level view of the dependencies between projects and layers in your solution.  <p><a href="./images/clip_image002.jpg"><img title="clip_image002" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image002" src="./images/clip_image002.jpg" width="356" height="146"></a> <p>Figure: ReSharper 8 introduces a dependency graph to its architecture tools. <p>  <p>  <p><a href="./images/clip_image004.jpg"><img title="clip_image004" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image004" src="./images/clip_image004.jpg" width="230" height="480"></a> <p>Figure: I structure my solution to reflect the Onion Architecture. <a href="http://rules.ssw.com.au/SoftwareDevelopment/RulesToBetterMVC/Pages/The-layers-of-the-onion-architecture.aspx">http://rules.ssw.com.au/SoftwareDevelopment/RulesToBetterMVC/Pages/The-layers-of-the-onion-architecture.aspx</a> <p>I have layers for UI, Business Logic Interfaces, Repository Interfaces and the Domain Model. I then inject my dependencies into these layers.<br>I like to structure the dependencies under a different solution folder so as to emphasise that the dependencies exist outside of the application core. <p>  <p>  <p><a href="./images/clip_image006.jpg"><img title="clip_image006" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image006" src="./images/clip_image006.jpg" width="618" height="339"></a> <p>Figure: R# now generates a dependency graph of your solution (or a selected part of your solution) and by default groups the projects by Solution folders.  <p>I love this because with a few clicks I can get a very clear idea of the dependencies between the different layers in my solution, and see where references exist to dependency projects.  <p>I unselected three items to remove noise from the diagram: the Solution Items folder (which contains the deployment project and documentation), the Common folder (which contains cross-cutting concerns) and the Dependency Resolver project which configures the IOC container. <p>  <p>  <p><a href="./images/clip_image008.jpg"><img title="clip_image008" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image008" src="./images/clip_image008.jpg" width="489" height="392"></a> <p>Figure: I generated the ReSharper dependency diagram as preparation for the first Sprint Review meeting and immediately noticed a dependency from my Client (UI) layer to a ‘Dependency’ project.  <p>No No No No No !!!  <p>  <p>  <p><a href="./images/clip_image010.jpg"><img title="clip_image010" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image010" src="./images/clip_image010.jpg" width="617" height="328"></a> <p>Figure: We refactored to inject the dependency into the application core and removed the reference to Data.FileStream from the UI Project. <br>The dependency graph now looks awesome ! There are no lines from the Clients window to the Dependencies window! <p>  <p>  <p><a href="./images/clip_image012.jpg"><img title="clip_image012" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image012" src="./images/clip_image012.jpg" width="610" height="133"></a> <p>Figure: As a comparison, this is how the Visual Studio Dependency Graph looks when first created. I would usually then remove the outlined items to remove noise. <p>  <p>  <p><a href="./images/clip_image014.jpg"><img title="clip_image014" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image014" src="./images/clip_image014.jpg" width="618" height="252"></a> <p>Figure: After removing the extra projects, my Visual Studio Dependency Graph is more readable, but I would love to see the ability to group projects by Solution Folder. <p>  <p>  <p><a href="./images/clip_image016.jpg"><img title="clip_image016" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image016" src="./images/clip_image016.jpg" width="607" height="391"></a> <p>Figure: The Visual Studio architecture tools are more complete and advanced than the ReSharper ones at present and the Layer Diagram is an invaluable tool that allows you to specify all the layers of your solution, assign projects and classes to particular layers and then have the architecture validated when you build.  <p>  <p>What I love about the ReSharper dependency graph is how easy it makes it to get a high level overview of my solution.  <p>It also has the ability to track changes to your architecture as your project progresses, and to indicate metrics. I’ll let you know how these features work out for me as the project progresses.